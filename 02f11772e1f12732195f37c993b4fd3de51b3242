{
  "comments": [
    {
      "key": {
        "uuid": "7bd3430c_4712b4f5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-10-22T09:51:40Z",
      "side": 1,
      "message": "By the time BMC boots means, already Firmware is activated right? why we are logging event as Firmware Updated started?",
      "range": {
        "startLine": 21,
        "startChar": 9,
        "endLine": 21,
        "endChar": 20
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08229905_7d3a2f39",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1000418
      },
      "writtenOn": "2021-10-18T17:08:24Z",
      "side": 1,
      "message": "nit: Can be moved to line number 81, so that reason numbering will be ascending 0x1, 0x2, 0x3...",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 100,
        "endChar": 75
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2914e8c5_b7511eb4",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1000566
      },
      "writtenOn": "2021-10-19T05:54:43Z",
      "side": 1,
      "message": "Hi Saravanan, I cannot have these in the same container as panicReasonMap as I need to implement the logic from line 160 to 168 for sd_journal_send have OK severity. Thank You",
      "parentUuid": "08229905_7d3a2f39",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 100,
        "endChar": 75
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b915dfb_a8e49276",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1000418
      },
      "writtenOn": "2021-10-19T08:09:19Z",
      "side": 1,
      "message": "I meant moving this container definition itself to line number 81. \nAny how it was a nit comment. Done.",
      "parentUuid": "2914e8c5_b7511eb4",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 100,
        "endChar": 75
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fb05165_79fb8898",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-10-22T09:51:40Z",
      "side": 1,
      "message": "Not convincing to have separate maps for each panic reason bit. Also i don\u0027t see a need for it.\n\nInstead, You can update existing map it self(Changing MessageID \u0026 arg for 0x01, 0x02 reason). If you are concerned about journal log(\"Platform firmware panic occurred.\") or severity, Then push them also to map.",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 100,
        "endChar": 75
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f198d20c_d239dc29",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000418
      },
      "writtenOn": "2021-10-22T09:37:53Z",
      "side": 1,
      "message": "This can be rewritten in a simple way:\n    if (it !\u003d panicReasonMap.end())\n    {\n       std::string msgId \u003d \"OpenBMC.0.1.\" + it-\u003esecond.first;\n       sd_journal_send(\"MESSAGE\u003d%s\", \"Platform firmware panic occurred.\",\n                       \"PRIORITY\u003d%i\", LOG_WARNING, \"REDFISH_MESSAGE_ID\u003d%s\",\n                        msgId.c_str(), \"REDFISH_MESSAGE_ARGS\u003d%s\",\n                        it-\u003esecond.second.c_str(), NULL);\n    }\n    else if ((it \u003d firmwareActivationMap.find(reason)) !\u003d firmwareActivationMap.end())\n    {\n         std::string msgId \u003d \"OpenBMC.0.1.\" + it-\u003esecond.first;\n         sd_journal_send(\"MESSAGE\u003d%s\", \"Platform firmware update occurred.\",\n                         \"PRIORITY\u003d%i\", LOG_INFO, \"REDFISH_MESSAGE_ID\u003d%s\",\n                          msgId.c_str(), \"REDFISH_MESSAGE_ARGS\u003d%s\",\n                          it-\u003esecond.second.c_str(), NULL);\n\n    }\n    else\n    {\n        // No matching found. So just return without logging event.\n        return;\n    }",
      "range": {
        "startLine": 158,
        "startChar": 0,
        "endLine": 177,
        "endChar": 53
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46355c86_e6ba2d05",
        "filename": "service/src/mainapp.cpp",
        "patchSetId": 1
      },
      "lineNbr": 177,
      "author": {
        "id": 1000269
      },
      "writtenOn": "2021-10-22T09:51:40Z",
      "side": 1,
      "message": "Need to switch code logic, Its mixing code a lot. Make it something like\nauto it \u003d panicReasonMap.find(reason);\nif (it !\u003d panicReasonMap.end())\n{\n    std::string msgId \u003d \"OpenBMC.0.1.\" + it-\u003esecond.first;\n    sd_journal_send(\"MESSAGE\u003d%s\", \"Platform firmware panic occurred.\",\n                    \"PRIORITY\u003d%i\", LOG_WARNING, \"REDFISH_MESSAGE_ID\u003d%s\",\n                    msgId.c_str(), \"REDFISH_MESSAGE_ARGS\u003d%s\",\n                    it-\u003esecond.second.c_str(), NULL);\n     return;\n}\n\n---- Fall back to other map and check --- and so on",
      "range": {
        "startLine": 173,
        "startChar": 0,
        "endLine": 177,
        "endChar": 53
      },
      "revId": "02f11772e1f12732195f37c993b4fd3de51b3242",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}